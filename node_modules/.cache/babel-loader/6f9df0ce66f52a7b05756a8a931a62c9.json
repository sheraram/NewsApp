{"ast":null,"code":"import _asyncToGenerator from\"/home/shera/Desktop/React/newsapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/shera/Desktop/React/newsapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/shera/Desktop/React/newsapp/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from'react';import NewsItems from'./NewsItems';import Spinner from'./Spinner';import InfiniteScroll from\"react-infinite-scroll-component\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var News=function News(props){var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setarticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setloading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setpage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],settotalResults=_useState8[1];document.title=\"\".concat(capitalizeFirstLetter(props.category),\" - NewsApp\");var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,datajson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:props.setProgress(20);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.ApiKey,\"&page=\").concat(page,\"&pageSize=\").concat(props.pageSize);setloading({loading:true});_context.next=5;return fetch(url);case 5:data=_context.sent;props.setProgress(50);_context.next=9;return data.json();case 9:datajson=_context.sent;props.setProgress(80);console.log(datajson);setarticles(datajson.articles);settotalResults(datajson.totalResults);setloading(false);props.setProgress(100);case 16:case\"end\":return _context.stop();}}},_callee);}));return function updateNews(){return _ref.apply(this,arguments);};}();useEffect(function(){updateNews();// eslint-disable-next-line\n},[]);// const handlenextclick = async () => {\n//     // console.log(\"next\");  \n//     setpage( page + 1 );\n//     updateNews();\n// }\n// const handleprevclick = async () => {\n//     // console.log(\"previous\");\n//     setpage( page- 1 );\n//     updateNews()\n// }\nvar fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,datajson;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=\").concat(props.ApiKey,\"&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);// setloading( true );\nsetpage(page+1);_context2.next=4;return fetch(url);case 4:data=_context2.sent;_context2.next=7;return data.json();case 7:datajson=_context2.sent;console.log(datajson);setarticles(articles.concat(datajson.articles));settotalResults(datajson.totalResults);setloading(false);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:'30px',marginTop:'85px'},children:[\"NewsApp - Top \",capitalizeFirstLetter(props.category),\" Headlines\"]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:(articles===null||articles===void 0?void 0:articles.length)||0,next:fetchMoreData,hasMore:(articles===null||articles===void 0?void 0:articles.length)||0!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(NewsItems,{title:!element.title?\"\":element.title,author:element.author,date:element.publishedAt,description:element.description?element.description:\"\",imageUrl:element.urlToImage,newsUrl:element.url,source:element.source.name},element.url)},element.url);})})})})]});};News.defaultProps={country:'in',pageSize:'8',category:'general'};export default News;","map":{"version":3,"sources":["/home/shera/Desktop/React/newsapp/src/Components/News.js"],"names":["React","useState","useEffect","NewsItems","Spinner","InfiniteScroll","News","props","capitalizeFirstLetter","string","charAt","toUpperCase","slice","articles","setarticles","loading","setloading","page","setpage","totalResults","settotalResults","document","title","category","updateNews","setProgress","url","country","ApiKey","pageSize","fetch","data","json","datajson","console","log","fetchMoreData","concat","margin","marginTop","length","map","element","author","publishedAt","description","urlToImage","source","name","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport NewsItems from './NewsItems'\nimport Spinner from './Spinner';\nimport PropTypes from 'prop-types'\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\n\nconst News = (props) => {\n    const capitalizeFirstLetter = (string) => {\n        return string.charAt(0).toUpperCase() + string.slice(1);\n    }\n\n    const [articles, setarticles] = useState([])\n    const [loading, setloading] = useState(true)\n    const [page, setpage] = useState(1)\n    const [totalResults, settotalResults] = useState(0)\n\n    document.title = `${capitalizeFirstLetter(props.category)} - NewsApp`\n\n\n    const updateNews = async () => {\n        props.setProgress(20);\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.ApiKey}&page=${page}&pageSize=${props.pageSize}`;\n        setloading({ loading: true });\n        let data = await fetch(url);\n        props.setProgress(50);\n        let datajson = await data.json();\n        props.setProgress(80)\n        console.log(datajson);\n        setarticles(datajson.articles)\n        settotalResults(datajson.totalResults)\n        setloading(false)\n        props.setProgress(100)\n    }\n\n    useEffect(() => {\n        updateNews();\n        // eslint-disable-next-line\n    }, [])\n\n    // const handlenextclick = async () => {\n    //     // console.log(\"next\");  \n    //     setpage( page + 1 );\n    //     updateNews();\n\n    // }\n\n    // const handleprevclick = async () => {\n    //     // console.log(\"previous\");\n    //     setpage( page- 1 );\n    //     updateNews()\n    // }\n\n    const fetchMoreData = async () => {\n\n        const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=${props.ApiKey}&page=${page + 1}&pageSize=${props.pageSize}`;\n        // setloading( true );\n        setpage(page + 1)\n        let data = await fetch(url);\n        let datajson = await data.json();\n        console.log(datajson);\n        setarticles(articles.concat(datajson.articles))\n        settotalResults(datajson.totalResults)\n        setloading(false)\n    };\n\n    return (\n        <>\n            <h1 className='text-center' style={{ margin: '30px', marginTop: '85px' }}>NewsApp - Top {capitalizeFirstLetter(props.category)} Headlines</h1>\n            {loading && <Spinner />}\n\n            <InfiniteScroll\n                dataLength={articles?.length || 0}\n                next={fetchMoreData}\n                hasMore={articles?.length || 0 !== totalResults}\n                loader={<Spinner />}\n            >\n                <div className=\"container\">\n                    <div className=\"row\">\n                        {articles.map((element) => {\n                            return <div className=\"col-md-4\" key={element.url}>\n                                <NewsItems\n                                    key={element.url}\n                                    title={!element.title ? \"\" : element.title}\n                                    author={element.author}\n                                    date={element.publishedAt}\n                                    description={element.description ? element.description : \"\"}\n                                    imageUrl={element.urlToImage}\n                                    newsUrl={element.url}\n                                    source={element.source.name}\n                                />\n                            </div>\n                        })}\n                    </div>\n                </div>\n            </InfiniteScroll>\n        </>\n    )\n}\n\nNews.defaultProps = {\n    country: 'in',\n    pageSize: '8',\n    category: 'general'\n}\n\nNews.propTypes = {\n    country: PropTypes.string,\n    pageSize: PropTypes.number,\n    category: PropTypes.string\n}\nexport default News\n\n"]},"metadata":{},"sourceType":"module"}